<!-- Liste des patients -->
<div class="card shadow-sm border-0 my-4">
  <div class="card-header bg-white border-bottom py-3">
    <h4 class="mb-0 d-flex align-items-center fw-bold">
      <i class="bi bi-clipboard2-pulse me-2 text-success"></i>
      Liste des patients
      <span class="badge bg-primary ms-2">{{ patients?.length || 0 }}</span>
    </h4>
  </div>

  <div class="card-body p-0">
    
    <!-- Affichage si liste vide -->
    <div *ngIf="!patients || patients.length === 0" class="text-center py-5 text-muted">
      <i class="bi bi-inbox display-1 d-block mb-3 opacity-50"></i>
      <p class="mb-0">Aucun patient enregistré</p>
    </div>

    <!-- Tableau si patients présents -->
    <div *ngIf="patients && patients.length > 0" class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        
        <thead class="table-light">
          <tr>
            <th class="text-center" style="width: 80px;">
              <i class="bi bi-hash"></i> ID
            </th>
            <th>
              <i class="bi bi-person"></i> Nom
            </th>
            <th>
              <i class="bi bi-envelope"></i> Email
            </th>
            <th class="text-center" style="width: 230px;">
              <i class="bi bi-gear"></i> Actions
            </th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let p of patients" 
              [class.table-warning]="patientEnEdition?.id === p.id">
            
            <td class="text-center fw-semibold text-muted">{{ p.id }}</td>
            <td class="fw-semibold">{{ p.nom }}</td>
            <td class="text-secondary">{{ p.email }}</td>

            <td class="text-center">
              <button 
                class="btn btn-warning btn-sm me-2" 
                (click)="modifierPatient(p)"
                [disabled]="patientEnEdition?.id === p.id">
                <i class="bi bi-pencil-square me-1"></i> Modifier
              </button>

              <button 
                class="btn btn-danger btn-sm" 
                (click)="supprimerPatient(p.id)">
                <i class="bi bi-trash me-1"></i> Supprimer
              </button>
            </td>
          </tr>
        </tbody>

      </table>
    </div>

  </div>
</div>


<!-- Bloc d'édition du patient -->
<div *ngIf="patientEnEdition" class="card shadow-sm border-warning mt-4">
  
  <div class="card-header bg-warning bg-opacity-10 border-warning">
    <h5 class="mb-0 d-flex align-items-center">
      <i class="bi bi-pencil-square me-2 text-warning"></i>
      Modification du patient #{{ patientEnEdition.id }}
    </h5>
  </div>

  <div class="card-body p-4">

    <div class="row g-3">

      <div class="col-md-6">
        <label class="form-label fw-semibold small">
          <i class="bi bi-person me-1"></i>
          Nom du patient
        </label>
        <input 
          class="form-control form-control-lg"
          [(ngModel)]="patientEnEdition.nom"
          placeholder="Nom du patient">
      </div>

      <div class="col-md-6">
        <label class="form-label fw-semibold small">
          <i class="bi bi-envelope me-1"></i>
          Email du patient
        </label>
        <input 
          type="email"
          class="form-control form-control-lg"
          [(ngModel)]="patientEnEdition.email"
          placeholder="Email du patient">
      </div>

    </div>

    <div class="d-flex justify-content-end gap-2 mt-4">
      <button class="btn btn-secondary px-4" (click)="annuler()">
        <i class="bi bi-x-circle me-2"></i> Annuler
      </button>

      <button class="btn btn-success px-4" (click)="sauvegarderModif()">
        <i class="bi bi-check-circle me-2"></i> Sauvegarder
      </button>
    </div>

  </div>
</div>
