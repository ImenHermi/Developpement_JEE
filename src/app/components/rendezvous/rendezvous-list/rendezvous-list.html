<div class="card shadow-sm border-0 my-4">

  <div class="card-header bg-white border-bottom py-3">
    <h4 class="mb-0 fw-bold">
      Liste des rendez-vous
      <span class="badge bg-primary ms-2">{{ rendezvous.length }}</span>
    </h4>
  </div>

  <div class="card-body p-0">

    <div *ngIf="rendezvous.length === 0" class="text-center py-5 text-muted">
      Aucun rendez-vous
    </div>

    <table *ngIf="rendezvous.length > 0"
           class="table table-hover align-middle mb-0">

      <thead class="table-light">
        <tr>
          <th>ID</th>
          <th>Date</th>
          <th>Statut</th>
          <th>Patient</th>
          <th>MÃ©decin</th>
          <th class="text-center">Actions</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let rdv of rendezvous"
            [class.table-warning]="rdvEnEdition?.id === rdv.id">

          <td>{{ rdv.id }}</td>
          <td>{{ rdv.date }}</td>
          <td>
            <span class="badge" 
                  [class.bg-success]="rdv.statut === 'prÃ©vu'"
                  [class.bg-danger]="rdv.statut === 'annulÃ©'"
                  [class.bg-secondary]="rdv.statut === 'terminÃ©'">
              {{ rdv.statut }}
            </span>
          </td>
          <td>Patient #{{ rdv.patient.id }}</td>
          <td>MÃ©decin #{{ rdv.medecin.id }}</td>

          <td class="text-center">
            <button
              type="button"
              class="btn btn-warning btn-sm me-2"
              (click)="modifier(rdv)">
              âœï¸ Modifier
            </button>

            <button
              type="button"
              class="btn btn-danger btn-sm"
              (click)="supprimer(rdv.id)">
              ğŸ—‘ï¸ Supprimer
            </button>
          </td>

        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- ğŸŸ¡ FORMULAIRE DE MODIFICATION -->
<div *ngIf="rdvEnEdition" class="card mt-4 border-warning shadow">

  <div class="card-header bg-warning text-dark fw-bold">
    âœï¸ Modifier le rendez-vous #{{ rdvEnEdition.id }}
  </div>

  <div class="card-body">

    <!-- DATE ET HEURE (datetime-local) -->
    <div class="mb-3">
      <label class="form-label fw-semibold">Date et Heure</label>
      <input
        type="datetime-local"
        class="form-control"
        [(ngModel)]="rdvEnEdition.date"
        name="date"
        required>
      <small class="form-text text-muted">
        Format: JJ/MM/AAAA HH:MM
      </small>
    </div>

    <!-- STATUT -->
    <div class="mb-3">
      <label class="form-label fw-semibold">Statut</label>
      <select
        class="form-select"
        [(ngModel)]="rdvEnEdition.statut"
        name="statut"
        required>
        <option value="prÃ©vu">âœ… PrÃ©vu</option>
        <option value="annulÃ©">âŒ AnnulÃ©</option>
        <option value="terminÃ©">âœ”ï¸ TerminÃ©</option>
      </select>
    </div>

    <!-- BOUTONS -->
    <div class="d-flex gap-2 mt-4">
      <button
        type="button"
        class="btn btn-success"
        (click)="sauvegarder()">
        ğŸ’¾ Sauvegarder
      </button>

      <button
        type="button"
        class="btn btn-secondary"
        (click)="annuler()">
        ğŸš« Annuler
      </button>
    </div>

  </div>
</div>